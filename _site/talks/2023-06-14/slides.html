<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <meta name="author" content="Louisa Smith">
  <title>Louisa H. Smith – Evaluating missingness assumptions for items in a frailty index</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-707ba7dd5efe904853eee2a01f0be884.css">
  <link rel="stylesheet" href="www/styles.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Evaluating missingness assumptions for items in a frailty index – Louisa H. Smith">
<meta property="og:site_name" content="Louisa H. Smith">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="center">
  <h1 class="title">Evaluating missingness assumptions for items in a frailty index</h1>
  <p class="author">Louisa Smith</p>
  <p class="date">SER: June 14, 2023</p>
  <p class="institute">Department of Health Sciences<br>The Roux Institute<br>Northeastern University</p>
  <p class="email">
    <a href="mailto:l.smith@northeastern.edu">l.smith@northeastern.edu</a>
</p>
  <p class="slide-url">
    <a href="https://louisahsmith.com/talks/2023-06-14/slides.html" target="_blank">louisahsmith.com/talks/2023-06-14/slides.html</a>
    </p>
</section>
<section id="context-deficit-accumulation-frailty-index" class="slide level2">
<h2>Context: deficit-accumulation frailty index</h2>
<div style="height: 0px;">
<div class="cell">
<style type="text/css">
div.callout-caution{border-left-color:#5e81ac !important}div.callout-caution.callout-style-default .callout-caption{background-color:#5e81ac !important}div.callout-caution.callout-style-default .callout-title{background-color:rgba(94,129,172,0.501961) !important}div.callout-note{border-left-color:#b48ead !important}div.callout-note.callout-style-default .callout-caption{background-color:#b48ead !important}div.callout-note.callout-style-default .callout-title{background-color:rgba(180,142,173,0.501961) !important}div.callout-important{border-left-color:#d08770 !important}div.callout-important.callout-style-default .callout-caption{background-color:#d08770 !important}div.callout-important.callout-style-default .callout-title{background-color:rgba(208,135,112,0.501961) !important}div.callout-warning{border-left-color:#ebcb8b !important}div.callout-warning.callout-style-default .callout-caption{background-color:#ebcb8b !important}div.callout-warning.callout-style-default .callout-title{background-color:rgba(235,203,139,0.501961) !important}div.callout-tip{border-left-color:#a3be8c !important}div.callout-tip.callout-style-default .callout-caption{background-color:#a3be8c !important}div.callout-tip.callout-style-default .callout-title{background-color:rgba(163,190,140,0.501961) !important}.callout-icon-container>p{color:#a1b6cf !important}div.callout-caution .callout-icon::before{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%2388c0d0' viewbox='0 0 16 16'%3E%3Cpath d='m8,0C3.58,0,0,3.58,0,8s3.58,8,8,8,8-3.58,8-8S12.42,0,8,0Zm0,1.02c3.85,0,6.98,3.12,6.98,6.98s-3.12,6.98-6.98,6.98S1.02,11.85,1.02,8,4.15,1.02,8,1.02Zm.12,1.7c-.44,0-.85.06-1.22.16-.38.11-.73.28-1.03.5-.26.19-.51.43-.7.68-.33.44-.52.93-.56,1.5,0,.04,0,.07,0,.07,0,0,1.74.22,1.74.22,0,0,0-.02.02-.08.16-.65.44-1.08.88-1.34.35-.21.78-.29,1.26-.24.22.02.42.08.59.16.22.1.41.27.56.46.12.17.2.37.22.58,0,.06,0,.2,0,.26-.02.15-.06.27-.12.4-.06.13-.12.2-.22.3-.16.17-.41.39-.86.75-.29.24-.48.41-.65.59-.4.41-.58.73-.68,1.18-.07.3-.1.6-.09,1.06,0,.11,0,.22,0,.24v.03h1.73v-.19c0-.26.02-.43.05-.59.05-.26.11-.4.32-.62.13-.14.3-.3.55-.52.38-.32.65-.56.9-.81.39-.39.6-.66.74-.98.11-.25.18-.49.2-.76,0-.07,0-.24,0-.32-.04-.56-.25-1.06-.65-1.52-.06-.07-.22-.23-.3-.3-.4-.35-.86-.59-1.4-.73-.34-.08-.66-.13-1.07-.14-.06,0-.13,0-.19,0h0Zm-.87,8.29v1.76h1.76v-1.76h-1.76Z'%3E%3C/path%3E%3C/svg%3E") !important}div.callout-tip .callout-icon::before{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAp1JREFUWEftls1rE0EUwN9mu0ZR/IDsNilaQUQPiv4BglhpbRPRgpTeBvI32HTjMadKuqn4JyzMsXhQaddYURQ8eFT0IOLBz3SbVpQqNo2bSkZ32WxmZme3uQjmtGTex2/ee/PekyDKb6m4D8vqV54Kan4ehNEbH0TNSkKCd6dSeHemLiT7V0gUhA+wBRJ+VGnRHKNm/QzIidfkzGkdx4r6NCiXb6yMO9nZOzxwNgDFOXLqh2Gk/J4biaXiIJbVd34ZdL7A9MM8wA8rW6JGaECi+nSA+/oA7tM+uYZ5N+BFww+BNuyjkDPeBuWpAB2KnPCJFGWYrW6A6tVDWBkgeUatL2kYnrFFHDFlqgUNK2liA/2yj8EF441ftgsgjDgODM8mEyDfrOWc0TkrjsOgjlydyppKZpFEIZBSJgBy6vthpPytFwDg66Bo9VkfTM47rl02wDaLLwjupgG11lIwfH2NDuBrPnGfHitiHoD08QAM3fTmCTsCP2oqXJpb7UkKfLMEDRUSIIHX5NhFuGlPOGPGrV4AyJZ+xUxqxJZwEdKE48JEeobw4NoRnEiRlokay6chW3kR1zHRswqncDL9/E9j6yzA9n/hrfjJdxlKJepIDgUrlRL47B7vydEKmz6MfO1zO6noCP36yl4Yn10XGkZtIdmazpnJ/oX2d75hTzpZYz70xj4BuapPmIpGdNCGfQ5yxmOaPncj6rhBlF1vUT+Id2reXhhrISG0ga1ItDlFGWjhS+m94gm8Q31JQikyH/x9f7N+EsbKr3ipCwcAgCg3iiLLfIZd49TSL5tJ7XaUIhTZiIUBIPCeRUCQYP8QSkHbYXDLDYMQLdj/AP9OBKLUgWj+xV+BW3EL02m8q7/GK0D0087ARWM5rEjd89/mEzIwY1V62wAAAABJRU5ErkJggg==") !important}div.callout-warning .callout-icon::before{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA4dJREFUWEfFVmtP01AYXmGbEJB1iEhwF4aIMYZoiKKBrWIiGIUyKGMJxpgYEow/gO985w+IGj+YeGM36DZNIFG2ghc03mJilOgYVQMBWYdiZB3MnINbumVd2xHkfOnJOe/leZ7z9j0HkW3zQLY5vyxrACFHGxbVmXyAgJz2N6oJN5xLHVkBCDlbD0e1J99wk8mDVK3aQr7ecgCxmAxZfDmwni5RydG+HASRxaSAkKxA2I53R/TYHZAkNzCFgu+aoY4BXyVNXVAR5O0tAzB3q7kg92DTL3juQapHbSFvgnnIab4U1RrhPBaY2llqtUEbMUOSAgsvBhLylnhXcpH+fngUsf7+nMWWgrV4wt3H+kTHFW0YHmqrihhM01Dq4MQJlWXkOZdh2NVeF9E0wDVl0FetsnigrdAQDYDLno+hGJtUQKIAhF342YgGewCc879TZYVmcj5sNx+P6I3PuIr8dHaU/tHWz8O1WapV1Ul6N61AbKhLuWioW009Xy5bsBdXJalOFh7lIeceJnzTgRFUICngq2klcvkaCwLxAYgN9ioWa/dHxBZkRgALI23lsnLTNxBMQVPNKEGOxQPzAQD7jMN8mtUZoS0S8GlKrB4YQ7ICmYoqE4BUhTL9lrwKLNvM9asVxknIPuCvRK3uAJeBEICQq70iqmmAPrm0z1RMeCZEKyCmsXBbsjLoP6+yuO+mJkiqn8CUHLHaEs0qbptWAcaB97I6bBAYsXP+gnLc/Ts1eMjW3hitaHgM1uUzk6fUXcPjqTb0UFd+nqEO+ipo6gpKkFcF+wDjaVGzexqX/jlZUYK0pZNu2dlRvaqt/wj2dtBPDhQRrk/p7Bg73snqMTvYUwamdqmsNhibVwGx3Yx7LQtdw5liJh3B0rC5Zm2v8d1G4YzXFBPe93y/j5T1H3b80Loeg7HktO+ImvC8TauAWPZSksdtkwqS83BJKMDYcSurx+7Ds58fL0ZbvaFMiRhnWxOrNY1C+xn/GbTLDed8I+RqR6OaBhhTSVPdKoK8B+YQAPehoQhSvaiFvC7EUqgPpC1IB97D6rAbYG/tw1hh2cXRFQiA76GRCUQ2ANL1F4RxtFSyusbPG7+Tr76I8DwVYg/2pR5BPCb3Gld8naxCtrLw+IhwcyYAKGbH96Gd3i9i2G/WhntPJCmw2cDZ+CPMEG5gDdh/YZ4KEKgu+CLKhpUUn20H8BfRiJwMGfDNGwAAAABJRU5ErkJggg==") !important}div.callout-important .callout-icon::before{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAqtJREFUWEdjZCAS3A4NFf3z/7f2XavY/fi0KB9b7Mj6l/Gayvr1r4gxmpGQomtBQfL3bKIfEFKHTV7pyFIFrXXrHuLTi9MBj0NDOS9aRnzDpVn56CIP9t//L3xn/8PI9I9V/6513A5cavWPr+CSXb36OzZ5rA64Geyrcds64TqyBvVDi1VUN2y4S0xI3A4IUL5pF3sHWa3q0QWa6ms330DXj+GA28F+hjet48/BFCofX2KluXr9cWIsRldzPTTQ8q5lzDGYuPrRhUaqazedR1aH4oAbfn5Sdxzin8IUGO1fwC21eTPOaCDGUc98fbnOOSZ8halVObBQWmPTpmcwPtwB/0NDmbdaRvyBSUjc2MlmMmvWb2IsIaTmTFoa6wsN918wdd7HV7Awrl79F8SHO2BL39r/MAWqpxeIqi/f/IaQwaTI34z0FbltmvAapsenKBhsN5i44+8ve8M+7hGIrXZkkavauo17CBl+K9jf/JZ13AmwnqOLLNTWbjxJUE+Qv8stm7jdIHUaBxfJqWzc+BjsAGTfw1xGyDBkPSC15OgD6WG8HhgofNc2BhzcyoeXqGuuX3+LkOXojibFAdcDA9Xu2sbchNonwkiO7ylxALreweMA9aMLdFTXbr5KTPBTGgK3g321b1onXAHnAlgU4CuvsTmK3EQIMgu5noE7gNhUDHPM9ZAAB1jVDKqCNddsOEBs6CGHIPkOQE3NROcemCNhIUh2FPxnYGDc2rf2H8hA76JgJkYGBnhJSigksEYBqYmQkCX45LEmQlIKE0osp1o5cCvQz/WWbfwukIHqxxa7q67ZAGYTA5Bz0MAXxQNeGYEcQFZ1TEYU3MJVHaOHAt0bJCAHDHiTDOSIAW2UwrLPgDbLYY4Y0I4JzBED2jVDLs0GrHOKXqTSqnsOAJxF1JQ5aCVbAAAAAElFTkSuQmCC") !important}div.callout-note .callout-icon::before{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAuxJREFUWEdjZCASeLY9F/39l0U7TX3/fnxaZt10dGT6+/fargaJV8QYzUhIkVPLe/kMtd0PCKnDJj/jlqvCvhrBh/j04nSAZd9jzkKZ499waZ513dnjP8ufC39/MzKyMDLrp2nu3YFLbf8TS67jRbLfscljdYBbwxuNFK1915E1zLhpr7KvVvwuMSHh1PxSOUP94B1ktXOuOWnuahC5ga4fwwEuTa8M0zQOnIMpnHnD2WpvnfBxYixGV+Pc9NYyXWPvMZj4rBsORnvqxM4jq0NxgGvDa6lUrf1PYQoWX7Ph3twghTMaiHGUb8MzrlitI19hamdfc5Te3SD6DMaHOyB01X/mUIbVf2ASne9D2c6mM/4mxhJCaoxn/mctF1z9C6ZuNUMoy+owxr8gPtwBq1at+g9TMO2ah+iBBr43+Ax2a3zrmqK5dxdIzZzrzm676oV341Pv0PBJJEtrx2uYmrCwMLDdYMKt5a1sitreRyD2zJtOrntrRfYQ8hWyg0FqYQbi0+fc/MYlXX0f2KFzbjnL7aoRfgx2ALJhxBiErodYB2Czi9G57ZNwusoOcHDPvOaovrdB9BYh34NDjcQogJnp3PBaLV1r/02wfXc8RBjJ8T0xDsSnBtnOweOAuTecdXbWCV8lxncuLW8t0tT2ohROxKYdkPnuTW+1kzX2XgHnAlhw4Cuv0R2FngNISYQgtcj1DNwBpPiAklwA8wzME1RxwLybjho7akXBKZtYgOEAUqIAIz+HhjIxMDLCS1JCjsAaBaQkQvQKhtTow5oISUlILi3vbNLU9hyG+ZRUB1BcDiAbMOe6o9+uetHNhIIdWR7FAeQUxcgGzLxtL7G3WvwlsQ7AKIrJqYwoKb7R9ZJVHZNbEOGsjtFDgVCDBN0B8685y25vEH6CLxrwNkhAGklqkv3/z+jU+kGOhf3nm12lEvD2Hi4HENUkA2ke0EYpzPUD2iyHOWJAOyYwRwxo1ww5MQ1Y5xQ9RdOqew4AmQrjruDNt+sAAAAASUVORK5CYII=") !important}.reveal .smaller .callout.callout-titled .callout-icon::before{margin-top:0.5rem !important}
</style>
</div>
</div>
<div class="columns">
<div class="column" style="width:40%;">
<p>Frailty is a syndrome of vulnerability more common in older adults</p>
<p>A frailty index is a quantitative measure of the aggregate burden of age-related health deficits</p>
</div><div class="column" style="width:60%;">
<p><img data-src="https://images.unsplash.com/photo-1626668011660-051379e9b211?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=1770&amp;q=80"></p>
</div></div>
<div class="center">
<p>FI = # of deficits / # of possible deficits</p>
</div>

<aside><div>
<p>&lt;0.15 robust; 0.15-0.25 pre-frail; &gt;0.25 frail</p>
</div></aside></section>
<section id="section" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="https://www.joinallofus.org/themes/jaou/img/nav_v2/allofus-logo.svg"></p>
</div><div class="column" style="width:50%;">
<ul>
<li>Large-scale NIH study to gather health data from 1 million+ Americans</li>
<li>Focus on those underrepresented in biomedical research</li>
<li>Multimodal data collection includes surveys, electronic health records, biospecimens, and more</li>
</ul>
</div></div>
</section>
<section id="aou-fi" class="slide level2">
<h2>AoU-FI</h2>
<ul>
<li>33 deficits based on items from multiple surveys</li>
<li>Cover multiple domains, including comorbidities, function, cognition, mental health, and geriatric syndromes</li>
<li>Cannot be weighted to heavily toward one domain (or it would be, e.g., a comorbidity index)</li>
</ul>
<p><strong>9.8% of 200,000+ participants had complete data</strong></p>
<p><strong>38% had data for &gt;80% of deficits (&gt;27/33)</strong></p>

<aside><div>
<p><span class="citation" data-cites="wong2023frailty">Wong et al. (<a href="#/section-2" role="doc-biblioref" onclick="">2023</a>)</span></p>
</div></aside></section>
<section id="options-for-missing-items-in-an-indexscale" class="slide level2">
<h2>Options for missing items in an index/scale</h2>
<div class="columns">
<div class="column" style="width:49%;">
<p><strong>Complete-case</strong> <br> Exclude those with any missing items</p>
<p><strong>Proration</strong> <br>Adjust denominator (person-mean imputation)</p>
<p><strong>Multiple imputation</strong> <br> Of individual items / total score</p>
</div><div class="column fragment" style="width:49%;">
<p>Throwing away <em>a lot</em> of data, strong assumptions <br> <br></p>
<p>Different weighting across domains <br> <br></p>
<p>Computationally intensive, still requires assumptions</p>
</div></div>
<!-- ## Understanding assumptions -->
<!-- Let's consider the joint distribution of the [missing]{.red} and [observed]{.blue} data and the [missingness pattern]{.green}, all conditional on the [fully observed variables]{.orange}: -->
<!-- $$ -->
<!-- f(\color{IndianRed}{Y_{mis}}, \color{SlateBlue}{Y_{obs}}, \color{Teal} {R} \mid \color{Salmon} {X}) -->
<!-- $$ -->
<!-- In our setting, $\color{IndianRed}{Y_{mis}}$ and $\color{SlateBlue}{Y_{obs}}$ are missing and observed components of the frailty variables, $\color{Teal} {R}$ is a matrix with indicators of missingness for each observation/variable, and $\color{Salmon}{X}$ are fully observed variables like age and gender -->
<!-- ## Factorization -->
<!-- $$ -->
<!-- \color{black} {f(Y_{obs}, Y_{mis}, R \mid X)} = \\ \color{IndianRed} {f(Y_{mis} \mid Y_{obs}, R, X)} \color{SlateBlue} {f(Y_{obs} \mid R, X)}\color{Teal}{f(R \mid X)} -->
<!-- $$ -->
<!-- ::: columns -->
<!-- ::: {.column width="39%"} -->
<!-- [distribution of missing data conditional on whats observed, and on missingness patterns]{.red} -->
<!-- ::: -->
<!-- ::: {.column width="35%"} -->
<!-- [distribution of observed data conditional on a given missingness pattern]{.blue} -->
<!-- ::: -->
<!-- ::: {.column width="26%"} -->
<!-- [probability of a given missingness pattern]{.green} -->
<!-- ::: -->
<!-- ::: -->
<!-- If $\color{IndianRed}{f(Y_{mis} \mid Y_{obs}, R, X)} = f(Y_{mis} \mid Y_{obs}, X)$, missing data doesn't depend on missingness pattern (missing at random; MAR) -->
</section>
<section id="pattern-mixture-models-for-missingness-not-at-random-mnar" class="slide level2">
<h2>Pattern-mixture models for missingness “not at random” (MNAR)</h2>
<p>Model how the distribution of missing data depends on missingness pattern</p>
<ul>
<li><p>For example, a missingness pattern in which a given deficit is missing may be associated with a <em>higher</em> probability of that deficit</p></li>
<li><p>Can’t tell from the observed data – by definition we are missing the item in that missingness pattern</p></li>
</ul>

<aside><div>
<p><span class="citation" data-cites="little1993patternmixture">Little (<a href="#/section-2" role="doc-biblioref" onclick="">1993</a>)</span>; <span class="citation" data-cites="rubin1987multiple">Rubin (<a href="#/section-2" role="doc-biblioref" onclick="">1987</a>)</span></p>
</div></aside></section>
<section id="sensitivity-analysis-via-delta-adjustment" class="slide level2">
<h2>Sensitivity analysis via delta adjustment</h2>
<p>A simple model for a single variable with missingness:</p>
<p><span class="math display">\[
E[Y \mid R, X] = \beta_0 + \beta_1X + \color{IndianRed}{\delta} I(R = \color{SlateBlue}{r_0})
\]</span></p>
<p>where <span class="math inline">\(\color{IndianRed}{\delta}\)</span> parameterizes how much different the distribution (expectation) of <span class="math inline">\(Y\)</span> is in observations with missing data patterns where it is missing (<span class="math inline">\(\color{SlateBlue}{r_0}\)</span>)</p>
</section>
<section id="multiple-imputation" class="slide level2">
<h2>Multiple imputation</h2>
<p>The delta adjustment approach can be done in the context of multiple imputation, e.g., with MICE</p>
<ul>
<li>Fit a model for the conditional expectation of <span class="math inline">\(Y\)</span> as usual</li>
<li>Add <span class="math inline">\(\delta\)</span> to the modeled expectation and draw values of <span class="math inline">\(Y\)</span></li>
<li>Analyze multiple datasets as usual</li>
</ul>

<aside><div>
<p><span class="citation" data-cites="vanbuuren2011mice">Van Buuren and Groothuis-Oudshoorn (<a href="#/section-2" role="doc-biblioref" onclick="">2011</a>)</span>; <span class="citation" data-cites="buuren2012flexible">Buuren (<a href="#/section-2" role="doc-biblioref" onclick="">2012</a>)</span></p>
</div></aside></section>
<section id="shiny-app-to-elicit-parameters" class="slide level2">
<h2>Shiny app to elicit parameters</h2>
<p><img data-src="img/app.png" height="570"></p>

<aside><div>
<p><span class="citation" data-cites="mason2017development">Mason et al. (<a href="#/section-2" role="doc-biblioref" onclick="">2017</a>)</span>; <span class="citation" data-cites="tompsett2020general">D. Tompsett et al. (<a href="#/section-2" role="doc-biblioref" onclick="">2020</a>)</span></p>
</div></aside></section>
<section id="complications" class="slide level2">
<h2>Complications</h2>
<p>With multiple missing variables, interpretation of sensitivity parameter <span class="math inline">\(\delta\)</span> is different</p>
<ul>
<li>conditional on the missingness pattern of the other variables</li>
<li><span class="citation" data-cites="tompsett2018use">D. M. Tompsett et al. (<a href="#/section-2" role="doc-biblioref" onclick="">2018</a>)</span> proposed a solution which involves eliciting more interpretable <span class="math inline">\(\delta\)</span>-like parameters and searching the solution space for the <span class="math inline">\(\delta\)</span>s they correspond to</li>
<li>computationally infeasible with 33 missing items without further assumptions</li>
</ul>
</section>
<section id="missingness-patterns" class="slide level2">
<h2>Missingness patterns</h2>
<p>For a given item <span class="math inline">\(Y\)</span>, we collapsed missingness patterns into:</p>
<ul>
<li>data on <span class="math inline">\(Y\)</span> and all surveys completed (<span class="red">group A</span>)</li>
<li>data on <span class="math inline">\(Y\)</span> but missing some surveys (<span class="blue">group B</span>)</li>
<li>missing data on <span class="math inline">\(Y\)</span> but completed survey (<span class="yellow">group C</span>)</li>
<li>missing survey on which <span class="math inline">\(Y\)</span> is collected (<span class="green">group D</span>)<sup>1</sup></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn1"><p>so not known whether it <em>would</em> have been observed had survey been completed</p></li></ol></aside></section>
<section id="interpretable-parameters" class="slide level2">
<h2>Interpretable parameters</h2>
<p>Most items are binary</p>
<ul>
<li>Parameters on odds ratio scale suggested in literature
<ul>
<li>“Non-respondents may have up to 1.3 times the odds of <em>item</em> compared to respondents who are similar in other ways”</li>
</ul></li>
<li>Even differences in means not particularly intuitive
<ul>
<li>“Non-respondents may have up to 10 percentage points higher prevalence of <em>item</em> compared to respondents who are similar in other ways”</li>
</ul></li>
</ul>
<p>Standardized means seem more interpretable</p>
</section>
<section id="standardized-means" class="slide level2">
<h2>Standardized means</h2>
<div class="smaller">
<ul>
<li>Fit a model for item among participants with complete data (<span class="red">group A</span>), conditional on demographics, etc.</li>
<li>Predict item prevalence among participants with other missing surveys, but complete item of interest (<span class="blue">group B</span>)</li>
<li>Compare observed and predicted item prevalence in <span class="blue">group B</span>: differences are not accounted by demographics, instead by missing data pattern</li>
</ul>
</div>
<div class="center">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/pred-obs.png"></p>
<figcaption><strong>Difficulty with everyday activities</strong></figcaption>
</figure>
</div>
</div>
</section>
<section id="this-comparison-makes-specifying-the-sensitivity-parameters-more-concrete" class="slide level2">
<h2>This comparison makes specifying the sensitivity parameters more concrete</h2>
<div class="center">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/fatigue.png"></p>
<figcaption><strong>Severe fatigue</strong></figcaption>
</figure>
</div>
</div>
</section>
<section id="experts-in-this-population-can-combine-with-their-knowledge" class="slide level2">
<h2>Experts in this population can combine with their knowledge</h2>
<div class="center">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/bathing.png" height="490"></p>
<figcaption><strong>Difficulty bathing</strong></figcaption>
</figure>
</div>
</div>
</section>
<section id="shiny-app-to-elicit-parameters-1" class="slide level2">
<h2>Shiny app to elicit parameters</h2>

<img data-src="img/app.png" class="r-stretch"></section>
<section id="analysis-fi-distribution" class="slide level2">
<h2>Analysis: FI distribution</h2>
<p><em>Synthetic AoU dataset</em></p>
<ul>
<li>complete case</li>
<li>proration &gt; 80% complete</li>
<li>proration &gt; 50% complete</li>
<li>MAR (MICE with no delta-adjustment)</li>
<li>MNAR, drawing sensitivity parameters from various distributions taking in account possible correlations
<ul>
<li>draw from triangle distribution, individually</li>
<li>compute rank within all draws</li>
<li>draw across all items by rank to allow for correlation</li>
</ul></li>
</ul>
</section>
<section id="distributions-of-sensitivity-parameters" class="slide level2">
<h2>Distributions of sensitivity parameters</h2>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-4-1.png" width="960" class="r-stretch"></section>
<section id="average-fi-age-50-55" class="slide level2">
<h2>Average FI age 50-55</h2>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-6-1.png" width="576" class="r-stretch"></section>
<section id="age-differences-in-fi" class="slide level2">
<h2>Age differences in FI</h2>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-7-1.png" width="576" class="r-stretch"></section>
<section id="section-1" class="slide level2">
<h2></h2>

<!-- ## Average FI among women -->
<!-- ```{r} -->
<!-- #| fig-width: 6 -->
<!-- #| fig-asp: .65 -->
<!-- filter(cleaned_res_gender, -->
<!--        term == "(Intercept)") %>% -->
<!--   group_by(term, type) %>%  -->
<!--   summarise(estimate = median(estimate), -->
<!--             conf.low = median(conf.low), -->
<!--             conf.high = median(conf.high)) %>%  -->
<!--   ggplot() + -->
<!--   aes(term, estimate, ymin = conf.low, ymax = conf.high, color = type) + -->
<!--   geom_point(position = position_dodge(width = .5)) + -->
<!--   geom_errorbar(position = position_dodge(width = .5))  + -->
<!--   theme_minimal() + -->
<!--   labs(y = "Average FI", x = NULL, color = NULL) + -->
<!--   theme(legend.position = "top", -->
<!--         axis.text.x = element_blank()) + -->
<!--   scale_color_okabe_ito() -->
<!-- ``` -->
<!-- ## Age-adjusted gender differences -->
<!-- ```{r} -->
<!-- #| fig-width: 6 -->
<!-- #| fig-asp: .55 -->
<!-- filter(cleaned_res_gender, -->
<!--        !term %in% c("(Intercept)", "Skip", "scale(age, scale = FALSE)")) %>% -->
<!--   group_by(term, type) %>%  -->
<!--   summarise(estimate = median(estimate), -->
<!--             conf.low = median(conf.low), -->
<!--             conf.high = median(conf.high)) %>%  -->
<!--   ggplot() + -->
<!--   aes(term, estimate, ymin = conf.low, ymax = conf.high, color = type) + -->
<!--   geom_point(position = position_dodge(width = .5)) + -->
<!--   geom_errorbar(position = position_dodge(width = .5)) + -->
<!--   theme_minimal() + -->
<!--   labs(y = "Difference in FI compared to women", x = "Gender", color = NULL) + -->
<!--   theme(legend.position = "top")  + -->
<!--   scale_color_okabe_ito() -->
<!-- ``` -->
<img data-src="slides_files/figure-revealjs/unnamed-chunk-8-1.png" width="576" class="r-stretch"></section>
<section id="conclusions-and-future-directions" class="slide level2">
<h2>Conclusions and future directions</h2>
<p><strong>Observations with missing data are quite different, but it’s not clear that reasonable non-random missingness makes any difference</strong></p>
<ul>
<li>Deal with computational challenges
<ul>
<li>Is it necessary to recompute frailty index in between every item?</li>
</ul></li>
<li>At what point is this necessary?
<ul>
<li>“Tipping point” analysis</li>
</ul></li>
</ul>
<p><em>Thanks to Chelsea Wong MD, Ariela Orkaby MD, Brianne Olivieri-Mui PhD</em></p>
</section>
<section id="section-2" class="slide level2 smaller scrollable">
<h2></h2>
<!-- Approach to MNAR missingness -->
<!-- Diggle & Kenward, 1994; Hogan & Laird, 1997; Kenward & Molenberghs, 1999; Little, 1993; Little, 1995 -->
<!-- “Multiple-model multiple imputation”, developed by Siddique et al. (Siddique et al., 2012; Siddique et al., 2014) -->


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-buuren2012flexible" class="csl-entry" role="listitem">
Buuren, Stef van. 2012. <em>Flexible Imputation of Missing Data</em>. Chapman &amp; <span>Hall</span>/<span>CRC</span> Interdisciplinary Statistics Series. <span>Boca Raton, FL</span>: <span>CRC Press</span>.
</div>
<div id="ref-little1993patternmixture" class="csl-entry" role="listitem">
Little, Roderick J. A. 1993. <span>“Pattern-Mixture Models for Multivariate Incomplete Data.”</span> <em>Journal of the American Statistical Association</em> 88 (421): 125–34. <a href="https://doi.org/10.2307/2290705">https://doi.org/10.2307/2290705</a>.
</div>
<div id="ref-mason2017development" class="csl-entry" role="listitem">
Mason, Alexina J, Manuel Gomes, Richard Grieve, Pinar Ulug, Janet T Powell, and James Carpenter. 2017. <span>“Development of a Practical Approach to Expert Elicitation for Randomised Controlled Trials with Missing Health Outcomes: Application to the <span>IMPROVE</span> Trial.”</span> <em>Clinical Trials</em> 14 (4): 357–67. <a href="https://doi.org/10.1177/1740774517711442">https://doi.org/10.1177/1740774517711442</a>.
</div>
<div id="ref-rubin1987multiple" class="csl-entry" role="listitem">
Rubin, Donald B. 1987. <em>Multiple Imputation for Nonresponse in Surveys</em>. New York: John Wiley &amp; Sons. <a href="https://doi.org/10.1002/9780470316696">https://doi.org/10.1002/9780470316696</a>.
</div>
<div id="ref-tompsett2018use" class="csl-entry" role="listitem">
Tompsett, Daniel Mark, Finbarr Leacy, Margarita Moreno-Betancur, Jon Heron, and Ian R. White. 2018. <span>“On the Use of the Not-at-Random Fully Conditional Specification (<span>NARFCS</span>) Procedure in Practice.”</span> <em>Statistics in Medicine</em> 37 (15): 2338–53. <a href="https://doi.org/10.1002/sim.7643">https://doi.org/10.1002/sim.7643</a>.
</div>
<div id="ref-tompsett2020general" class="csl-entry" role="listitem">
Tompsett, Daniel, Stephen Sutton, Shaun R. Seaman, and Ian R. White. 2020. <span>“A General Method for Elicitation, Imputation, and Sensitivity Analysis for Incomplete Repeated Binary Data.”</span> <em>Statistics in Medicine</em> 39 (22): 2921–35. <a href="https://doi.org/10.1002/sim.8584">https://doi.org/10.1002/sim.8584</a>.
</div>
<div id="ref-vanbuuren2011mice" class="csl-entry" role="listitem">
Van Buuren, Stef, and Karin Groothuis-Oudshoorn. 2011. <span>“Mice: Multivariate Imputation by Chained Equations in <span>R</span>.”</span> <em>Journal Of Statistical Software</em> 45 (3): 1–67. <a href="https://doi.org/10.1177/0962280206074463">https://doi.org/10.1177/0962280206074463</a>.
</div>
<div id="ref-wong2023frailty" class="csl-entry" role="listitem">
Wong, Chelsea, Michael P. Wilczek, Louisa H. Smith, Jordon D. Bosse, Erin L. Richard, Robert Cavanaugh, Justin Manjourides, Ariela R. Orkaby, and Brianne Olivieri-Mui. 2023. <span>“Frailty Among <span>Sexual</span> and <span>Gender Minority Older Adults</span>: <span>The All</span> of <span>Us Database</span>.”</span> <em>Journal of Gerontology: Medical Sciences</em>, in press.
</div>
</div>
</section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': true,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'pdfMaxPagesPerSlide': 1,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/louisahsmith\.com");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>